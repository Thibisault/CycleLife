<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#2563EB" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png" sizes="192x192">
  <title>Cycles 29-6-29-6-9 — PWA</title>
  <style>
    :root{ --color-work:#2563EB; --color-sport:#F59E0B; --color-break:#10B981; --bg:#0b0f14; --fg:#e9edf3; --muted:#94a3b8; --card:#121821; --accent:#38bdf8; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;height:100%;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;}
    header{padding:16px 16px 8px;display:flex;align-items:center;justify-content:space-between;gap:12px;background:linear-gradient(180deg, rgba(255,255,255,0.05), transparent);position:sticky;top:0}
    h1{font-size:18px;margin:0;letter-spacing:0.5px}
    .phase-badge{padding:6px 10px;border-radius:999px;font-weight:600;font-size:12px;background:#1e293b;color:#cbd5e1}
    .phase-badge.work{background:var(--color-work);color:#fff}
    .phase-badge.sport{background:var(--color-sport);color:#111827}
    .phase-badge.break{background:var(--color-break);color:#052e25}
    .wrap{max-width:900px;margin:0 auto;padding:12px;}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,0.35);}
    .grid{display:grid;gap:12px}
    @media (min-width:800px){ .grid{grid-template-columns:1.2fr 1fr} }
    .timer{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;padding:24px 16px;border-radius:16px;background:#0f1620;border:1px solid #1e293b;}
    .time{font-size:64px;font-weight:800;letter-spacing:2px;line-height:1}
    .sub-label{font-size:14px;color:var(--muted)}
    .progress{height:12px;width:100%;background:#0b1220;border-radius:999px;overflow:hidden;border:1px solid #1e293b}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#7dd3fc);transition:width .2s ease}
    .controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .btn{appearance:none;border:1px solid #334155;background:#0e1726;color:#e2e8f0;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:.15s transform ease}
    .btn:active{transform:scale(0.98)}
    .btn.primary{background:var(--accent);border-color:#0891b2;color:#0b1220}
    .btn.warn{background:#f43f5e;border-color:#be123c}
    .btn.ghost{background:#0b1220;border-color:#1e293b;color:#cbd5e1}
    .btn.small{padding:8px 10px;font-size:13px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .pill{padding:6px 10px;border:1px solid #1e293b;border-radius:999px;background:#0b1220;color:#cbd5e1;font-size:12px}
    .timeline{display:flex;gap:6px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid #172036;color:#cbd5e1;font-size:12px;background:#0b1220;opacity:.7}
    .chip.active{opacity:1;box-shadow:0 0 0 2px rgba(56,189,248,.3) inset}
    .chip.work{border-color:var(--color-work)}
    .chip.sport{border-color:var(--color-sport)}
    .chip.break{border-color:var(--color-break)}
    details.settings{background:#0b1220;border:1px solid #1e293b;border-radius:14px;padding:10px}
    details summary{cursor:pointer;font-weight:700;color:#e2e8f0}
    .field{display:flex;gap:8px;align-items:center;margin:6px 0}
    .field input[type="text"], .field input[type="number"]{padding:8px 10px;border-radius:10px;border:1px solid #243045;background:#0a1220;color:#e2e8f0;width:120px}
    .field label{width:140px;font-size:14px;color:#cbd5e1}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{border:1px solid #233047;padding:8px;font-size:14px}
    th{background:#0b1220}
    tbody tr:nth-child(odd){background:#0c1320}
    .updown{display:flex;gap:6px}
    .mute-row{display:flex;align-items:center;gap:10px;margin-top:6px}
    .vol{width:160px}
    .note{font-size:12px;color:#94a3b8}
  </style>
</head>
<body>
<header>
  <h1>Cycles 29‑6‑29‑6‑9 — Corps & Esprit</h1>
  <div class="phase-badge" id="phaseBadge">—</div>
</header>

<div class="wrap grid">
  <section class="card">
    <div class="timer">
      <div class="time" id="timeDisplay">00:00</div>
      <div class="sub-label" id="subInfo">Prêt</div>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="controls">
        <button class="btn primary" id="startBtn">Démarrer</button>
        <button class="btn" id="pauseBtn">Pause</button>
        <button class="btn ghost" id="prevBtn">⟵ Préc.</button>
        <button class="btn ghost" id="nextBtn">Suiv. ⟶</button>
        <button class="btn warn" id="stopBtn">Arrêter</button>
      </div>
      <div class="row">
        <div class="pill" id="nextPhase">Prochaine phase : —</div>
        <div class="pill" id="eta">Fin ~ —:—</div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <div class="timeline" id="timeline"></div>
      <div class="note">Boucle infinie : Travail 29′ → Sport 6′ → Travail 29′ → Sport 6′ → Pause 9′</div>
    </div>
  </section>

  <aside class="card">
    <details class="settings" open>
      <summary>Réglages</summary>
      <div class="field"><label>Travail (mm:ss)</label><input id="workInput" type="text" value="29:00" /></div>
      <div class="field"><label>Sport (mm:ss)</label><input id="sportInput" type="text" value="06:00" /></div>
      <div class="field"><label>Pause (mm:ss)</label><input id="breakInput" type="text" value="09:00" /></div>
      <div class="mute-row">
        <label>Volume</label><input id="volume" class="vol" type="range" min="0" max="1" step="0.01" value="0.6">
        <label><input id="mute" type="checkbox"> Muet</label>
        <button class="btn small" id="notifBtn">Notifications</button>
        <button class="btn small" id="installBtn" disabled>Installer</button>
      </div>
      <hr style="border-color:#1e293b;margin:10px 0">
      <h3>Sous‑exercices (pendant Sport)</h3>
      <div class="field">
        <label>Auto‑remplir</label>
        <input id="autoCount" type="number" min="1" value="6" style="width:90px">
        <input id="autoEach" type="text" value="00:50" style="width:90px">
        <button class="btn small" id="autoFillBtn">Remplir</button>
      </div>
      <table>
        <thead><tr><th>#</th><th>Nom</th><th>Durée (mm:ss)</th><th>Ordre</th><th>Suppr.</th></tr></thead>
        <tbody id="subTable"></tbody>
      </table>
      <div class="field">
        <button class="btn small" id="addSub">+ Ajouter</button>
        <button class="btn small" id="resetBtn">Réglages par défaut</button>
      </div>
      <div class="note">Si la somme &lt; durée Sport, le reste devient “Récup”. Si &gt;, les derniers sont tronqués.</div>
    </details>
  </aside>
</div>

<script src="app.js"></script>
</body>
</html>
